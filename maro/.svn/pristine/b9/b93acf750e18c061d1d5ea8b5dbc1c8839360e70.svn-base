webpackJsonp([1],{"1yoW":function(t,e){},A8Ar:function(t,e){console.time("test"),function(t,e){var o,a,n,r,i=0,l=e.designWidth,s=e.designHeight||0,d=e.designFontSize||20,c=e.callback||null,u=document.documentElement;document.body;u.style.width="100%",function(){if(o=u.getBoundingClientRect().width,r=r||arguments.callee,o!==t.innerWidth&&i<20)t.setTimeout(function(){i++,r()},0);else if(e=0!==s?Math.min(t.innerWidth/l,t.innerHeight/s):t.innerWidth/l,(a=parseInt(1e4*e*d)/1e4)+"px"!==getComputedStyle(u)["font-size"])return u.style.fontSize=a+"px",c&&c(a);var e}(),t.addEventListener("onorientationchange"in window?"orientationchange":"resize",function(){clearTimeout(n),n=setTimeout(function(){r()},300)},!1)}(window,{designWidth:1920,designHeight:1080,designFontSize:100,callback:function(t){console.timeEnd("test")}})},DkZE:function(t,e){},LIPj:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%"},attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=o("VU/8")({name:"App"},n,!1,function(t){o("LIPj")},null,null).exports,i=o("/ocq"),l=o("mvHQ"),s=o.n(l),d={name:"app-exit",props:{flag:{type:Boolean,default:!1}},components:{},data:function(){return{}},methods:{close:function(){this.$emit("exitFlagChange",!1)},exitModalNo:function(){this.close()},exitModalYes:function(){this.close(),this.$router.push({path:"/"})}}},c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"my-exit"},[o("el-dialog",{attrs:{title:"",visible:t.flag,width:"55%","before-close":t.close,center:""},on:{"update:visible":function(e){t.flag=e}}},[o("div",{staticClass:"dialog-body"},[t._v("确定要退出登录吗？")]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.exitModalNo()}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.exitModalYes()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var u=o("VU/8")(d,c,!1,function(t){o("1yoW")},null,null).exports,m={name:"app-header",props:{title:{type:Object,default:function(){return{titleText:"",btns:[]}}}},components:{exit:u},data:function(){return{exitFlag:!1}},methods:{btnHandle:function(t,e){switch(t.usage){case"exit":this.exitFlag=!0}},exitFlagUpdate:function(t){this.exitFlag=t}}},f={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"my-header"},[o("div",{staticClass:"my-header-title"},[o("span",[t._v(t._s(t.title.titleText))])]),t._v(" "),t._l(t.title.btns,function(e,a){return t.title.btns.length?o("div",{staticClass:"my-header-icon",on:{click:function(o){t.btnHandle(e,a)}}},[o("i",{class:e.class})]):t._e()}),t._v(" "),o("exit",{attrs:{flag:t.exitFlag},on:{exitFlagChange:function(e){t.exitFlagUpdate(e)}}})],2)},staticRenderFns:[]};var p=o("VU/8")(m,f,!1,function(t){o("ZnJt")},"data-v-900813d4",null).exports,h={name:"table-done",props:{done:{type:Array,required:!0}},data:function(){return{}},methods:{outDish:function(t,e){var o=this,a=new URLSearchParams;a.append("foodorderId",t.maroClientFoodorderVOList[0].id);var n=t.maroClientFoodorderVOList[0].quantity,r={data:a,myVue:this,baseUrl:this.BaseUrl};this.common.$ajax(this.BaseUrl+"maroClientServerorderController.do?cookedFood",r,function(t){if("undefined"!=window.print3&&void 0!=window.print3)for(var e=1;e<=n;e++){if("null"==t.attributes.printJson.table?print3.SetTable(""):print3.SetTable(t.attributes.printJson.table),"null"==t.attributes.printJson.orderNum?print3.SetOrdernum(""):print3.SetOrdernum(t.attributes.printJson.orderNum),"null"==t.attributes.printJson.waiter?print3.SetWaiter(""):print3.SetWaiter(t.attributes.printJson.waiter),"null"==t.attributes.printJson.guests?print3.SetGuests(0):print3.SetGuests(t.attributes.printJson.guests),"null"==t.attributes.printJson.dateTime1?print3.SetDatetime1(""):print3.SetDatetime1(t.attributes.printJson.dateTime1),"null"==t.attributes.printJson.dateTime2?print3.SetDatetime2(""):print3.SetDatetime2(t.attributes.printJson.dateTime2),"null"==t.attributes.printJson.dishes)print3.SetDishes("");else{var a=JSON.parse(t.attributes.printJson.dishes).name;print3.SetDishes(a)}"null"==t.attributes.printJson.remark?print3.SetRemark(""):print3.SetRemark(t.attributes.printJson.remark),print3.Print()}o.$emit("outDish",{obj:""})},function(){o.$message.error("出菜失败!")})}}},b={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"table-done"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.done,"row-class-name":"table-cutoff","header-row-class-name":"table-cutoff",height:"100%",size:"medium",fit:""}},[o("el-table-column",{attrs:{prop:"maroClientFoodorderVO.foodName",label:"菜品"}}),t._v(" "),o("el-table-column",{attrs:{prop:"maroClientFoodorderVO.specificationsName",label:"规格"}}),t._v(" "),o("el-table-column",{attrs:{prop:"maroClientFoodorderVO.typeName",label:"分类"}}),t._v(" "),o("el-table-column",{attrs:{prop:"maroClientFoodorderVOList[0].createTimeMMSSString",label:"时间"}}),t._v(" "),o("el-table-column",{attrs:{prop:"maroClientFoodorderVOList[0].seatName",label:"桌号"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){t.outDish(e.row,e.$index)}}},[t._v("出菜")])]}}])})],1)],1)},staticRenderFns:[]};var v=o("VU/8")(h,b,!1,function(t){o("iAcw")},"data-v-78a4c972",null).exports,g=o("woOf"),w=o.n(g),y={name:"table-undo",props:{undo:{type:Array,required:!0}},data:function(){return{modalFlag:!1,modalObj:[{createTimeString:"2018-05-03 09:27",foodName:"小蛋糕",quantity:1,remark:null,seatName:"H座",specificationsName:"小份"},{createTimeString:"2018-05-03 10:56",foodName:"小蛋糕",quantity:2,remark:"不加辣",seatName:"E座",specificationsName:"小份"}],modalList:{obj:"",i:0,j:0},widthStandard:50,widthQuan:0,widthName:0,widthSpec:0}},computed:{modalTitle:function(){return this.modalFlag?this.modalObj[0].foodName+"-"+this.modalObj[0].specificationsName:""}},created:function(){var t=document.getElementsByTagName("html")[0].style.fontSize.split("px")[0],e=this.widthStandard*t/50;this.widthQuan=e,this.widthName=e,this.widthSpec=e},methods:{objectSpanMethod:function(t){var e=t.row,o=(t.column,t.rowIndex,t.columnIndex);if(0===o||1===o){if(0===e.flag)return{rowspan:2,colspan:1};if(1===e.flag)return{rowspan:0,colspan:0}}},tableCellClassName:function(t){var e=t.row,o=(t.column,t.rowIndex,t.columnIndex);return 0!==o&&1!==o||0!=e.flag?"":"table-curoff-cell"},tableRowClassName:function(t){var e=t.row;t.rowIndex;return 0!==e.flag?"table-cutoff":""},toCook:function(t,e,o,a){for(var n=0;n<a.foodOrderItemGroupResultDTOList.length;n++)for(var r=0;r<a.foodOrderItemGroupResultDTOList[n].maroClientFoodorderVOList.length;r++)a.foodOrderItemGroupResultDTOList[n].maroClientFoodorderVOList[r].isDisabled=!1;for(var i=0;i<a.foodOrderItemGroupResultDTOList.length;i++)for(var l=0;l<a.foodOrderItemGroupResultDTOList[i].maroClientFoodorderVOList.length;l++)if(a.foodOrderItemGroupResultDTOList[i].maroClientFoodorderVOList[l].id==t.id){this.modalObj=a.foodOrderItemGroupResultDTOList[i].maroClientFoodorderVOList;break}this.modalFlag=!0},tabClick:function(){var t=s()(this.undo);this.undo=JSON.parse(t)},modalNo:function(){this.modalFlag=!1},modalYes:function(){for(var t=new Array,e=0;e<this.modalObj.length;e++)t.push(this.modalObj[e].id);this.$emit("toCookHandle",{obj:t}),this.modalNo()},pickCook:function(t,e,o){var n=new Array;n.push(t.id),this.$emit("toCookHandle",{obj:n});o.currentTarget;if(0==e){for(var r=0;r<this.modalObj.length;r++)if(t.id==this.modalObj[r].id){a.default.set(this.modalObj[r],"isDisabled",!0);break}this.modalObj=w()([],this.modalObj)}}}},C={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"table-undo"},[o("el-tabs",{staticClass:"1",attrs:{"tab-position":"left"},on:{"tab-click":t.tabClick}},t._l(t.undo,function(e,a){return o("el-tab-pane",{key:a,attrs:{label:e.typeName}},[0!==t.widthQuan?o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.menu,"row-class-name":t.tableRowClassName,"cell-class-name":t.tableCellClassName,"header-row-class-name":"table-cutoff","span-method":t.objectSpanMethod,size:"medium",height:"100%",fit:""}},[o("el-table-column",{attrs:{label:"菜品"},scopedSlots:t._u([{key:"default",fn:function(n){return[o("span",{staticClass:"table-href",on:{click:function(o){t.toCook(n.row,a,n.$index,e)}}},[t._v(t._s(n.row.foodName))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"quantity",label:"总数",width:t.widthQuan}}),t._v(" "),o("el-table-column",{attrs:{prop:"seatName",label:"桌号",width:t.widthName}}),t._v(" "),o("el-table-column",{attrs:{prop:"specificationsName",label:"规格",width:t.widthSpec}}),t._v(" "),o("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),o("el-table-column",{attrs:{prop:"waitTime",label:"时长"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){t.pickCook(e.row,1,o)}}},[t._v("打厨")])]}}])})],1):t._e()],1)})),t._v(" "),o("el-dialog",{attrs:{title:t.modalTitle,visible:t.modalFlag,width:"60%","custom-class":"dachu-modal",center:""},on:{"update:visible":function(e){t.modalFlag=e}}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.modalObj,height:"45vh",fit:""}},[o("el-table-column",{attrs:{prop:"seatName",label:"桌号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"specificationsName",label:"规格"}}),t._v(" "),o("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),o("el-table-column",{attrs:{prop:"waitTime",label:"已等待时长"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{ref:"btn",attrs:{type:"primary",disabled:e.row.isDisabled},on:{click:function(o){t.pickCook(e.row,0,o)}}},[t._v("打厨")])]}}])})],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.modalYes}},[t._v("全部打厨")]),t._v(" "),o("el-button",{on:{click:t.modalNo}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]};var _={name:"app-main",components:{myHeader:p,tableDone:v,tableUndo:o("VU/8")(y,C,!1,function(t){o("DkZE")},null,null).exports},data:function(){return{title_01:{titleText:"已做菜单",btns:[{class:"el-icon-back",usage:"exit"}]},title_02:{titleText:"未做菜单"},done:[],undo:[]}},mounted:function(){},methods:{toCookHandle:function(t){var e=new URLSearchParams,o=this;e.append("foodorderIdListJson",s()(t.obj));var a={data:e,myVue:this,baseUrl:this.BaseUrl};this.common.$ajax(this.BaseUrl+"maroClientServerorderController.do?cookFood",a,function(t){o.$message({message:"打厨成功!",type:"success"}),o.loadData()},function(){o.$message.error("打厨失败!")})},outDish:function(){this.loadData()},handleData:function(t){var e=this;t.forEach(function(t,o){e.$set(t,"typeName",t.typeString),e.$set(t,"typeId",t.type);var a=[];t.foodOrderItemGroupResultDTOList.forEach(function(t,e){var o=t.maroClientFoodorderVOList;1===o.length?(o[0].flag=-1,a.push(o[0])):o.length>1&&(o[0].flag=0,o[1].flag=1,a.push(o[0],o[1]))}),e.$set(t,"menu",a)}),e.undo=t},handleDoneData:function(t){var e=this;e.done=[],t.forEach(function(t,o){t.foodOrderItemGroupResultDTOList.forEach(function(o,a){var n="";o.maroClientFoodorderVOList.forEach(function(t,e){n=n+","+t.seatName+"("+t.quantity+")"}),","==n.substring(0,1)&&(n=n.substring(1,n.length)),o.maroClientFoodorderVO.seatNameList=n;var r={maroClientFoodorderVO:o.maroClientFoodorderVO,maroClientFoodorderVOList:o.maroClientFoodorderVOList};e.done.push(r),e.$set(o.maroClientFoodorderVO,"typeName",t.typeString),e.$set(o.maroClientFoodorderVO,"typeId",t.type)})})},loadData:function(){var t=this,e={data:new URLSearchParams,myVue:this,baseUrl:this.BaseUrl};this.common.$ajax(this.BaseUrl+"maroClientServerorderController.do?listFoodToKitchen",e,function(e){console.log(e),t.handleData(e.obj.foodOrderItemResultDTOList),t.handleDoneData(e.obj.doneFoodOrderItemResultDTOList)},function(t){})}},created:function(){this.loadData();var t=this;setInterval(function(){t.loadData()},3e4)}},S={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{staticClass:"my-con",attrs:{direction:"horizontal"}},[o("el-main",{staticClass:"my-block my-block-left"},[o("my-header",{attrs:{title:t.title_02}}),t._v(" "),o("div",{staticClass:"my-table-container"},[o("table-undo",{attrs:{undo:t.undo},on:{toCookHandle:function(e){t.toCookHandle(e)}}})],1)],1),t._v(" "),o("el-main",{staticClass:"my-block my-block-right"},[o("my-header",{attrs:{title:t.title_01}}),t._v(" "),o("div",{staticClass:"my-table-container"},[o("table-done",{attrs:{done:t.done},on:{outDish:function(e){t.outDish(e)}}})],1)],1)],1)},staticRenderFns:[]};var k=o("VU/8")(_,S,!1,function(t){o("QubX"),o("eL2H")},"data-v-f948e9e0",null).exports,O={data:function(){return{form:{name:"",pass:"",mark:!1},rules:{name:[{validator:function(t,e,o){if(!e)return o(new Error("账号不能为空"));setTimeout(function(){o()},300)},trigger:"blur"}],pass:[{validator:function(t,e,o){if(!e)return o(new Error("密码不能为空"));setTimeout(function(){o()},300)},trigger:"blur"}]}}},created:function(){null!=localStorage.getItem("name")?(this.form.name=localStorage.getItem("name"),this.form.pass=localStorage.getItem("pass"),this.form.mark=!0):this.form.mark=!1},methods:{onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var o=e,a=new URLSearchParams;a.append("user",e.form.name),a.append("pass",e.form.pass),a.append("isLogin",!0);var n=e.$loading({lock:!0,text:"正在登录……",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",customClass:"login-loading"}),r={data:a,myVue:e};e.common.$ajax(e.BaseUrl+"clientUserController.do?login",r,function(t){n.close(),o.$message.success({message:"登录成功!"}),o.$router.push({path:"/main"}),localStorage.setItem("user",o.form.name),localStorage.setItem("password",o.form.pass),o.form.mark?(localStorage.setItem("name",o.form.name),localStorage.setItem("pass",o.form.pass)):(localStorage.removeItem("name"),localStorage.removeItem("pass"))},function(t){n.close(),o.$message.error("登录失败!")})})}}},x={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login-bg"},[o("div",{staticClass:"login-box"},[o("el-form",{ref:"ruleForm",attrs:{model:t.form,"status-icon":"",rules:t.rules,size:"large"}},[o("el-form-item",{attrs:{prop:"name"}},[o("el-input",{attrs:{placeholder:"账号"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"pass"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:t.form.pass,callback:function(e){t.$set(t.form,"pass",e)},expression:"form.pass"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"mark"}},[o("el-checkbox",{model:{value:t.form.mark,callback:function(e){t.$set(t.form,"mark",e)},expression:"form.mark"}},[t._v("记住密码")])],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit("ruleForm")}}},[t._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var F=o("VU/8")(O,x,!1,function(t){o("fxxf"),o("b9xl")},"data-v-7238b792",null).exports;a.default.use(i.a);var L=new i.a({routes:[{path:"/",name:"Login",component:F},{path:"/main",name:"Main",component:k}]}),N=o("mtWM"),D=o.n(N),I=o("zL8q"),T=o.n(I),$=(o("bewX"),o("A8Ar"),{$ajax:function(t,e,o,a){var n=this;console.log(t,e),D.a.post(t,e.data).then(function(r){console.log(r),r.data.success?o(r.data):100==r.data.obj?n.login(t,e,o,a):a(r)}).catch(function(t){a(t)})},login:function(t,e,o,a){var n=this,r=new URLSearchParams;console.log(window.localStorage.getItem("user"),window.localStorage.getItem("password")),r.append("user",window.localStorage.getItem("user")),r.append("pass",window.localStorage.getItem("password")),r.append("isLogin",!0),console.log(e.baseUrl),D.a.post(e.baseUrl+"clientUserController.do?login",r).then(function(r){r.data.success?n.$ajax(t,e,o,a):L.push({path:"/"})}).catch(function(t){L.push({path:"/"})})}});a.default.use(T.a,{size:"medium"}),a.default.prototype.$http=D.a,D.a.defaults.withCredentials=!0,"undefined"!=window.client&&void 0!=window.client?a.default.prototype.BaseUrl=client.addr():a.default.prototype.BaseUrl="http://10.10.11.54:8082/",a.default.config.productionTip=!1,a.default.prototype.common=$,new a.default({el:"#app",router:L,render:function(t){return t(r)},template:"<App/>"})},QubX:function(t,e){},ZnJt:function(t,e){},b9xl:function(t,e){},bewX:function(t,e){},eL2H:function(t,e){},fxxf:function(t,e){},iAcw:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.bc2d531a7b28dfd76244.js.map