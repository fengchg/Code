webpackJsonp([1],{"0jfS":function(t,e){},"1yoW":function(t,e){},A8Ar:function(t,e){console.time("test"),function(t,e){var a,o,n,r,i=0,l=e.designWidth,s=e.designHeight||0,d=e.designFontSize||20,c=e.callback||null,u=document.documentElement;document.body;u.style.width="100%",function(){if(a=u.getBoundingClientRect().width,r=r||arguments.callee,a!==t.innerWidth&&i<20)t.setTimeout(function(){i++,r()},0);else if(e=0!==s?Math.min(t.innerWidth/l,t.innerHeight/s):t.innerWidth/l,(o=parseInt(1e4*e*d)/1e4)+"px"!==getComputedStyle(u)["font-size"])return u.style.fontSize=o+"px",c&&c(o);var e}(),t.addEventListener("onorientationchange"in window?"orientationchange":"resize",function(){clearTimeout(n),n=setTimeout(function(){r()},300)},!1)}(window,{designWidth:1920,designHeight:1080,designFontSize:100,callback:function(t){console.timeEnd("test")}})},DkZE:function(t,e){},L6Hh:function(t,e){},LIPj:function(t,e){},N828:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%"},attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},n,!1,function(t){a("LIPj")},null,null).exports,i=a("/ocq"),l=a("mvHQ"),s=a.n(l),d={name:"app-exit",props:{flag:{type:Boolean,default:!1}},components:{},data:function(){return{}},methods:{close:function(){this.$emit("exitFlagChange",!1)},exitModalNo:function(){this.close()},exitModalYes:function(){this.close(),this.$router.push({path:"/"})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-exit"},[a("el-dialog",{attrs:{title:"",visible:t.flag,width:"55%","before-close":t.close,center:""},on:{"update:visible":function(e){t.flag=e}}},[a("div",{staticClass:"dialog-body"},[t._v("确定要退出登录吗？")]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.exitModalNo()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.exitModalYes()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(d,c,!1,function(t){a("1yoW")},null,null).exports,m={name:"app-header",props:{title:{type:Object,default:function(){return{titleText:"",btns:[]}}}},components:{exit:u},data:function(){return{exitFlag:!1}},methods:{btnHandle:function(t,e){switch(t.usage){case"exit":this.exitFlag=!0}},exitFlagUpdate:function(t){this.exitFlag=t}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-header"},[a("div",{staticClass:"my-header-title"},[a("span",[t._v(t._s(t.title.titleText))])]),t._v(" "),t._l(t.title.btns,function(e,o){return t.title.btns.length?a("div",{staticClass:"my-header-icon",on:{click:function(a){t.btnHandle(e,o)}}},[a("i",{class:e.class})]):t._e()}),t._v(" "),a("exit",{attrs:{flag:t.exitFlag},on:{exitFlagChange:function(e){t.exitFlagUpdate(e)}}})],2)},staticRenderFns:[]};var p=a("VU/8")(m,f,!1,function(t){a("ZnJt")},"data-v-900813d4",null).exports,h={name:"table-done",props:{done:{type:Array,required:!0}},data:function(){return{}},methods:{outDish:function(t,e){var a=new URLSearchParams,o=this;a.append("foodorderId",t.maroClientFoodorderVOList[0].id);var n=t.maroClientFoodorderVOList[0].quantity;this.$http.post(o.BaseUrl+"maroClientServerorderController.do?cookedFood",a,{withCredentials:!0}).then(function(t){if(t.data.success){if("undefined"!=window.print3&&void 0!=window.print3)for(var e=1;e<=n;e++){if("null"==t.data.attributes.printJson.table?print3.SetTable(""):print3.SetTable(t.data.attributes.printJson.table),"null"==t.data.attributes.printJson.orderNum?print3.SetOrdernum(""):print3.SetOrdernum(t.data.attributes.printJson.orderNum),"null"==t.data.attributes.printJson.waiter?print3.SetWaiter(""):print3.SetWaiter(t.data.attributes.printJson.waiter),"null"==t.data.attributes.printJson.guests?print3.SetGuests(0):print3.SetGuests(t.data.attributes.printJson.guests),"null"==t.data.attributes.printJson.dateTime1?print3.SetDatetime1(""):print3.SetDatetime1(t.data.attributes.printJson.dateTime1),"null"==t.data.attributes.printJson.dateTime2?print3.SetDatetime2(""):print3.SetDatetime2(t.data.attributes.printJson.dateTime2),"null"==t.data.attributes.printJson.dishes)print3.SetDishes("");else{var a=JSON.parse(t.data.attributes.printJson.dishes).name;print3.SetDishes(a)}"null"==t.data.attributes.printJson.remark?print3.SetRemark(""):print3.SetRemark(t.data.attributes.printJson.remark),print3.Print()}o.$emit("outDish",{obj:""})}else o.$message.error("出菜失败!")}).catch(function(t){o.$alert("登录超时，请重新登录","登录超时",{confirmButtonText:"确定",callback:function(t){o.$router.push({path:"/"})}})})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-done"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.done,"row-class-name":"table-cutoff","header-row-class-name":"table-cutoff",height:"100%",size:"medium",fit:""}},[a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.foodName",label:"菜品"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.specificationsName",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.typeName",label:"分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVOList[0].createTimeMMSSString",label:"时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVOList[0].seatName",label:"桌号"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.outDish(e.row,e.$index)}}},[t._v("出菜")])]}}])})],1)],1)},staticRenderFns:[]};var v=a("VU/8")(h,b,!1,function(t){a("L6Hh")},"data-v-4e9fa7ca",null).exports,g=a("woOf"),w=a.n(g),y={name:"table-undo",props:{undo:{type:Array,required:!0}},data:function(){return{modalFlag:!1,modalObj:[{createTimeString:"2018-05-03 09:27",foodName:"小蛋糕",quantity:1,remark:null,seatName:"H座",specificationsName:"小份"},{createTimeString:"2018-05-03 10:56",foodName:"小蛋糕",quantity:2,remark:"不加辣",seatName:"E座",specificationsName:"小份"}],modalList:{obj:"",i:0,j:0},widthStandard:50,widthQuan:0,widthName:0,widthSpec:0}},computed:{modalTitle:function(){return this.modalFlag?this.modalObj[0].foodName+"-"+this.modalObj[0].specificationsName:""}},created:function(){var t=document.getElementsByTagName("html")[0].style.fontSize.split("px")[0],e=this.widthStandard*t/50;this.widthQuan=e,this.widthName=e,this.widthSpec=e},methods:{objectSpanMethod:function(t){var e=t.row,a=(t.column,t.rowIndex,t.columnIndex);if(0===a||1===a){if(0===e.flag)return{rowspan:2,colspan:1};if(1===e.flag)return{rowspan:0,colspan:0}}},tableCellClassName:function(t){var e=t.row,a=(t.column,t.rowIndex,t.columnIndex);return 0!==a&&1!==a||0!=e.flag?"":"table-curoff-cell"},tableRowClassName:function(t){var e=t.row;t.rowIndex;return 0!==e.flag?"table-cutoff":""},toCook:function(t,e,a,o){for(var n=0;n<o.foodOrderItemGroupResultDTOList.length;n++)for(var r=0;r<o.foodOrderItemGroupResultDTOList[n].maroClientFoodorderVOList.length;r++)o.foodOrderItemGroupResultDTOList[n].maroClientFoodorderVOList[r].isDisabled=!1;for(var i=0;i<o.foodOrderItemGroupResultDTOList.length;i++)for(var l=0;l<o.foodOrderItemGroupResultDTOList[i].maroClientFoodorderVOList.length;l++)if(o.foodOrderItemGroupResultDTOList[i].maroClientFoodorderVOList[l].id==t.id){this.modalObj=o.foodOrderItemGroupResultDTOList[i].maroClientFoodorderVOList;break}this.modalFlag=!0},tabClick:function(){var t=s()(this.undo);this.undo=JSON.parse(t)},modalNo:function(){this.modalFlag=!1},modalYes:function(){for(var t=new Array,e=0;e<this.modalObj.length;e++)t.push(this.modalObj[e].id);this.$emit("toCookHandle",{obj:t}),this.modalNo()},pickCook:function(t,e,a){var n=new Array;n.push(t.id),this.$emit("toCookHandle",{obj:n});a.currentTarget;if(0==e){for(var r=0;r<this.modalObj.length;r++)if(t.id==this.modalObj[r].id){o.default.set(this.modalObj[r],"isDisabled",!0);break}this.modalObj=w()([],this.modalObj)}}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-undo"},[a("el-tabs",{staticClass:"1",attrs:{"tab-position":"left"},on:{"tab-click":t.tabClick}},t._l(t.undo,function(e,o){return a("el-tab-pane",{key:o,attrs:{label:e.typeName}},[0!==t.widthQuan?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.menu,"row-class-name":t.tableRowClassName,"cell-class-name":t.tableCellClassName,"header-row-class-name":"table-cutoff","span-method":t.objectSpanMethod,size:"medium",height:"100%",fit:""}},[a("el-table-column",{attrs:{label:"菜品"},scopedSlots:t._u([{key:"default",fn:function(n){return[a("span",{staticClass:"table-href",on:{click:function(a){t.toCook(n.row,o,n.$index,e)}}},[t._v(t._s(n.row.foodName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"总数",width:t.widthQuan}}),t._v(" "),a("el-table-column",{attrs:{prop:"seatName",label:"桌号",width:t.widthName}}),t._v(" "),a("el-table-column",{attrs:{prop:"specificationsName",label:"规格",width:t.widthSpec}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{prop:"waitTime",label:"时长"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.pickCook(e.row,1,a)}}},[t._v("打厨")])]}}])})],1):t._e()],1)})),t._v(" "),a("el-dialog",{attrs:{title:t.modalTitle,visible:t.modalFlag,width:"60%","custom-class":"dachu-modal",center:""},on:{"update:visible":function(e){t.modalFlag=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.modalObj,height:"45vh",fit:""}},[a("el-table-column",{attrs:{prop:"seatName",label:"桌号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"specificationsName",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{prop:"waitTime",label:"已等待时长"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{ref:"btn",attrs:{type:"primary",disabled:e.row.isDisabled},on:{click:function(a){t.pickCook(e.row,0,a)}}},[t._v("打厨")])]}}])})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.modalYes}},[t._v("全部打厨")]),t._v(" "),a("el-button",{on:{click:t.modalNo}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]};var k={name:"app-main",components:{myHeader:p,tableDone:v,tableUndo:a("VU/8")(y,C,!1,function(t){a("DkZE")},null,null).exports},data:function(){return{title_01:{titleText:"已做菜单",btns:[{class:"el-icon-back",usage:"exit"}]},title_02:{titleText:"未做菜单"},done:[],undo:[]}},mounted:function(){},methods:{toCookHandle:function(t){var e=new URLSearchParams,a=this;e.append("foodorderIdListJson",s()(t.obj)),this.$http.post(a.BaseUrl+"maroClientServerorderController.do?cookFood",e,{withCredentials:!0}).then(function(t){t.data.success?(a.$message({message:"打厨成功!",type:"success"}),a.loadData()):a.$message.error("打厨失败!")}).catch(function(t){a.$alert("登录超时，请重新登录","登录超时",{confirmButtonText:"确定",callback:function(t){a.$router.push({path:"/"})}})})},outDish:function(){this.loadData()},handleData:function(t){var e=this;t.forEach(function(t,a){e.$set(t,"typeName",t.typeString),e.$set(t,"typeId",t.type);var o=[];t.foodOrderItemGroupResultDTOList.forEach(function(t,e){var a=t.maroClientFoodorderVOList;1===a.length?(a[0].flag=-1,o.push(a[0])):a.length>1&&(a[0].flag=0,a[1].flag=1,o.push(a[0],a[1]))}),e.$set(t,"menu",o)}),e.undo=t},handleDoneData:function(t){var e=this;e.done=[],t.forEach(function(t,a){t.foodOrderItemGroupResultDTOList.forEach(function(a,o){var n="";a.maroClientFoodorderVOList.forEach(function(t,e){n=n+","+t.seatName+"("+t.quantity+")"}),","==n.substring(0,1)&&(n=n.substring(1,n.length)),a.maroClientFoodorderVO.seatNameList=n;var r={maroClientFoodorderVO:a.maroClientFoodorderVO,maroClientFoodorderVOList:a.maroClientFoodorderVOList};e.done.push(r),e.$set(a.maroClientFoodorderVO,"typeName",t.typeString),e.$set(a.maroClientFoodorderVO,"typeId",t.type)})})},loadData:function(){var t=this,e=this;this.$http.get(this.BaseUrl+"maroClientServerorderController.do?listFoodToKitchen",{withCredentials:!0}).then(function(e){e.data.success&&(t.handleData(e.data.obj.foodOrderItemResultDTOList),t.handleDoneData(e.data.obj.doneFoodOrderItemResultDTOList))}).catch(function(t){e.$alert("登录超时，请重新登录","登录超时",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/"})}})})}},created:function(){this.loadData();var t=this;setInterval(function(){t.loadData()},3e4)}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"my-con",attrs:{direction:"horizontal"}},[a("el-main",{staticClass:"my-block my-block-left"},[a("my-header",{attrs:{title:t.title_02}}),t._v(" "),a("div",{staticClass:"my-table-container"},[a("table-undo",{attrs:{undo:t.undo},on:{toCookHandle:function(e){t.toCookHandle(e)}}})],1)],1),t._v(" "),a("el-main",{staticClass:"my-block my-block-right"},[a("my-header",{attrs:{title:t.title_01}}),t._v(" "),a("div",{staticClass:"my-table-container"},[a("table-done",{attrs:{done:t.done},on:{outDish:function(e){t.outDish(e)}}})],1)],1)],1)},staticRenderFns:[]};var O=a("VU/8")(k,_,!1,function(t){a("N828"),a("yZ+F")},"data-v-5848b8ef",null).exports,S={data:function(){return{form:{name:"",pass:"",mark:!1},rules:{name:[{validator:function(t,e,a){if(!e)return a(new Error("账号不能为空"));setTimeout(function(){a()},300)},trigger:"blur"}],pass:[{validator:function(t,e,a){if(!e)return a(new Error("密码不能为空"));setTimeout(function(){a()},300)},trigger:"blur"}]}}},created:function(){null!=localStorage.getItem("name")?(this.form.name=localStorage.getItem("name"),this.form.pass=localStorage.getItem("pass"),this.form.mark=!0):this.form.mark=!1},methods:{onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=new URLSearchParams;a.append("user",e.form.name),a.append("pass",e.form.pass),a.append("isLogin",!0);var o=e.$loading({lock:!0,text:"正在登录……",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",customClass:"login-loading"}),n=e;e.$http.post(e.BaseUrl+"clientUserController.do?login",a,{withCredentials:!0}).then(function(t){console.log(t),o.close(),t.data.success?(n.$message.success({message:"登录成功!"}),n.$router.push({path:"/main"}),n.form.mark?(localStorage.setItem("name",n.form.name),localStorage.setItem("pass",n.form.pass)):(localStorage.removeItem("name"),localStorage.removeItem("pass"))):n.$message.error("登录失败!")}).catch(function(t){console.log(t),o.close(),n.$message.error("登录失败!")})})}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-bg"},[a("div",{staticClass:"login-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.form,"status-icon":"",rules:t.rules,size:"large"}},[a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:"账号"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"pass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:t.form.pass,callback:function(e){t.$set(t.form,"pass",e)},expression:"form.pass"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"mark"}},[a("el-checkbox",{model:{value:t.form.mark,callback:function(e){t.$set(t.form,"mark",e)},expression:"form.mark"}},[t._v("记住密码")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit("ruleForm")}}},[t._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var x=a("VU/8")(S,F,!1,function(t){a("0jfS"),a("OBcQ")},"data-v-3f72519a",null).exports;o.default.use(i.a);var N=new i.a({routes:[{path:"/",name:"Login",component:x},{path:"/main",name:"Main",component:O}]}),$=a("mtWM"),D=a.n($),T=a("zL8q"),L=a.n(T);a("bewX"),a("A8Ar");o.default.use(L.a,{size:"medium"}),o.default.prototype.$http=D.a,"undefined"!=window.client&&void 0!=window.client?o.default.prototype.BaseUrl=client.addr():o.default.prototype.BaseUrl="http://10.10.11.54:8082/",o.default.config.productionTip=!1,new o.default({el:"#app",router:N,render:function(t){return t(r)},template:"<App/>"})},OBcQ:function(t,e){},ZnJt:function(t,e){},bewX:function(t,e){},"yZ+F":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.26e161030793ce04528f.js.map