webpackJsonp([1],{"5ZCM":function(t,e){},Bx4J:function(t,e){},DRAD:function(t,e){},"DUK/":function(t,e){},LIPj:function(t,e){},Lku4:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%"},attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},n,!1,function(t){a("LIPj")},null,null).exports,i=a("/ocq"),l=a("mvHQ"),s=a.n(l),d={name:"app-exit",props:{flag:{type:Boolean,default:!1}},components:{},data:function(){return{}},methods:{close:function(){this.$emit("exitFlagChange",!1)},exitModalNo:function(){this.close()},exitModalYes:function(){this.close(),this.$router.push({path:"/"})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"",visible:t.flag,width:"55%","before-close":t.close,center:""},on:{"update:visible":function(e){t.flag=e}}},[a("div",{staticClass:"dialog-body"},[t._v("确定要退出登录吗？")]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.exitModalNo()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.exitModalYes()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(d,c,!1,function(t){a("Bx4J")},"data-v-6e412b84",null).exports,m={name:"app-header",props:{title:{type:Object,default:function(){return{titleText:"",btns:[]}}}},components:{exit:u},data:function(){return{exitFlag:!1}},methods:{btnHandle:function(t,e){switch(t.usage){case"exit":this.exitFlag=!0}},exitFlagUpdate:function(t){this.exitFlag=t}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-header"},[a("div",{staticClass:"my-header-title"},[a("span",[t._v(t._s(t.title.titleText))])]),t._v(" "),t._l(t.title.btns,function(e,o){return t.title.btns.length?a("div",{staticClass:"my-header-icon",on:{click:function(a){t.btnHandle(e,o)}}},[a("i",{class:e.class})]):t._e()}),t._v(" "),a("exit",{attrs:{flag:t.exitFlag},on:{exitFlagChange:function(e){t.exitFlagUpdate(e)}}})],2)},staticRenderFns:[]};var f=a("VU/8")(m,p,!1,function(t){a("5ZCM")},"data-v-01dca2fa",null).exports,h={name:"table-done",props:{done:{type:Array,required:!0}},data:function(){return{}},methods:{outDish:function(t,e){var a=new URLSearchParams,o=this;a.append("foodorderId",t.maroClientFoodorderVOList[0].id),this.$http.post(o.BaseUrl+"maroClientServerorderController.do?cookedFood",a,{withCredentials:!0}).then(function(t){if(console.log(t),t.data.success){if("undefined"!=window.print3&&void 0!=window.print3){if("null"==t.data.attributes.printJson.table?print3.SetTable(""):print3.SetTable(t.data.attributes.printJson.table),"null"==t.data.attributes.printJson.orderNum?print3.SetOrdernum(""):print3.SetOrdernum(t.data.attributes.printJson.orderNum),"null"==t.data.attributes.printJson.waiter?print3.SetWaiter(""):print3.SetWaiter(t.data.attributes.printJson.waiter),"null"==t.data.attributes.printJson.guests?print3.SetGuests(0):print3.SetGuests(t.data.attributes.printJson.guests),"null"==t.data.attributes.printJson.dateTime1?print3.SetDatetime1(""):print3.SetDatetime1(t.data.attributes.printJson.dateTime1),"null"==t.data.attributes.printJson.dateTime2?print3.SetDatetime2(""):print3.SetDatetime2(t.data.attributes.printJson.dateTime2),"null"==t.data.attributes.printJson.dishes)print3.SetDishes("");else{var e=JSON.parse(t.data.attributes.printJson.dishes).name;print3.SetDishes(e)}"null"==t.data.attributes.printJson.remark?print3.SetRemark(""):print3.SetRemark(t.data.attributes.printJson.remark),print3.Print()}o.$emit("outDish",{obj:""})}else o.$message.error("出菜失败!")}).catch(function(t){var e=this;this.$alert("登录超时，请重新登录","登录超时",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/"})}})})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-done"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.done,size:"medium",fit:""}},[a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.foodName",label:"菜品",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.specificationsName",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.typeName",label:"分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.createTimeString",label:"时间",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.quantity",label:"总份数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.seatNameList",label:"桌号"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.outDish(e.row,e.$index)}}},[t._v("出菜")])]}}])})],1)],1)},staticRenderFns:[]};var v=a("VU/8")(h,b,!1,function(t){a("WC2d")},"data-v-4570354b",null).exports,g={name:"table-undo",props:{undo:{type:Array,required:!0}},data:function(){return{modalFlag:!1,modalObj:[{createTimeString:"2018-05-03 09:27",foodName:"小蛋糕",quantity:1,remark:null,seatName:"H座",specificationsName:"小份"},{createTimeString:"2018-05-03 10:56",foodName:"小蛋糕",quantity:2,remark:"不加辣",seatName:"E座",specificationsName:"小份"}],modalList:{obj:"",i:0,j:0}}},computed:{modalTitle:function(){return this.modalFlag?this.modalObj[0].foodName+"-"+this.modalObj[0].specificationsName:""}},methods:{toCook:function(t,e,a){this.modalList.obj=t,this.modalList.i=e,this.modalList.j=a,console.log(t,e,a),this.modalObj=t.maroClientFoodorderVOList,this.modalFlag=!0},tabClick:function(){var t=s()(this.undo);this.undo=JSON.parse(t)},modalNo:function(){this.modalFlag=!1},modalYes:function(){this.$emit("toCookHandle",{obj:this.modalList.obj,indexType:this.modalList.i,indexMenu:this.modalList.j}),this.modalNo()}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-undo"},[a("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":t.tabClick}},t._l(t.undo,function(e,o){return a("el-tab-pane",{key:o,attrs:{label:e.typeName}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.foodOrderItemGroupResultDTOList,size:"medium",fit:""}},[a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.foodName",label:"菜品",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.specificationsName",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.createTimeString",label:"时间",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"maroClientFoodorderVO.quantity",label:"份数"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.toCook(e.row,o,e.$index)}}},[t._v("打厨")])]}}])})],1)],1)})),t._v(" "),a("el-dialog",{attrs:{title:t.modalTitle,visible:t.modalFlag,width:"60%","custom-class":"dachu-modal",center:""},on:{"update:visible":function(e){t.modalFlag=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.modalObj,height:"45vh",fit:""}},[a("el-table-column",{attrs:{prop:"seatName",label:"桌号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"份数",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTimeString",label:"时间",sortable:"",width:"170"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"忌口备注"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.modalNo}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.modalYes}},[t._v("确定打厨")])],1)],1)],1)},staticRenderFns:[]};var _={name:"app-main",components:{myHeader:f,tableDone:v,tableUndo:a("VU/8")(g,C,!1,function(t){a("sQCG"),a("Lku4")},"data-v-6984f310",null).exports},data:function(){return{title_01:{titleText:"已做菜单",btns:[{class:"el-icon-back",usage:"exit"}]},title_02:{titleText:"未做菜单"},done:[],undo:[]}},mounted:function(){},methods:{toCookHandle:function(t){var e=new URLSearchParams,a=this,o=[];t.obj.maroClientFoodorderVOList.forEach(function(t,e){o.push(t.id)}),e.append("foodorderIdListJson",s()(o)),this.$http.post(a.BaseUrl+"maroClientServerorderController.do?cookFood",e,{withCredentials:!0}).then(function(t){console.log(t),t.data.success?a.loadData():a.$message.error("打厨失败!")}).catch(function(t){var e=this;this.$alert("登录超时，请重新登录","登录超时",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/"})}})})},outDish:function(){this.loadData()},handleData:function(t){var e=this;t.forEach(function(t,a){t.foodOrderItemGroupResultDTOList.forEach(function(a,o){e.$set(a.maroClientFoodorderVO,"typeName",t.typeString),e.$set(a.maroClientFoodorderVO,"typeId",t.type)}),e.$set(t,"typeName",t.typeString),e.$set(t,"typeId",t.type)});for(var a=0;a<t.length;a++)t[a].type,t[a].typeId,t[a].typeName,t[a].typeString;e.undo=t},handleDoneData:function(t){var e=this;e.done=[],t.forEach(function(t,a){t.foodOrderItemGroupResultDTOList.forEach(function(a,o){var n="";a.maroClientFoodorderVOList.forEach(function(t,e){n=n+","+t.seatName+"("+t.quantity+")"}),","==n.substring(0,1)&&(n=n.substring(1,n.length)),a.maroClientFoodorderVO.seatNameList=n;var r={maroClientFoodorderVO:a.maroClientFoodorderVO,maroClientFoodorderVOList:a.maroClientFoodorderVOList};e.done.push(r),e.$set(a.maroClientFoodorderVO,"typeName",t.typeString),e.$set(a.maroClientFoodorderVO,"typeId",t.type)})})},loadData:function(){var t=this;console.log(222),this.$http.get(this.BaseUrl+"maroClientServerorderController.do?listFoodToKitchen",{withCredentials:!0}).then(function(e){console.log(e.data),e.data.success&&(t.handleData(e.data.obj.foodOrderItemResultDTOList),t.handleDoneData(e.data.obj.doneFoodOrderItemResultDTOList))}).catch(function(e){t.$alert("登录超时，请重新登录","登录超时",{confirmButtonText:"确定",callback:function(e){t.$router.push({path:"/"})}}),console.log(22222223344444)})}},created:function(){this.loadData();var t=this;setInterval(function(){t.loadData()},3e4)}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("el-main",[a("my-header",{attrs:{title:t.title_01}}),t._v(" "),a("div",{staticClass:"my-table-container"},[a("table-done",{attrs:{done:t.done},on:{outDish:function(e){t.outDish(e)}}})],1)],1),t._v(" "),a("el-main",[a("my-header",{attrs:{title:t.title_02}}),t._v(" "),a("div",{staticClass:"my-table-container"},[a("table-undo",{attrs:{undo:t.undo},on:{toCookHandle:function(e){t.toCookHandle(e)}}})],1)],1)],1)},staticRenderFns:[]};var F=a("VU/8")(_,y,!1,function(t){a("SmGP"),a("DUK/")},"data-v-916f4b02",null).exports,S={data:function(){return{form:{name:"",pass:"",mark:!1},rules:{name:[{validator:function(t,e,a){if(!e)return a(new Error("账号不能为空"));setTimeout(function(){a()},300)},trigger:"blur"}],pass:[{validator:function(t,e,a){if(!e)return a(new Error("密码不能为空"));setTimeout(function(){a()},300)},trigger:"blur"}]}}},created:function(){null!=localStorage.getItem("name")?(this.form.name=localStorage.getItem("name"),this.form.pass=localStorage.getItem("pass"),this.form.mark=!0):this.form.mark=!1},methods:{onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=new URLSearchParams;a.append("user",e.form.name),a.append("pass",e.form.pass),a.append("isLogin",!0);var o=e.$loading({lock:!0,text:"正在登录……",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",customClass:"login-loading"}),n=e;e.$http.post(e.BaseUrl+"clientUserController.do?login",a,{withCredentials:!0}).then(function(t){console.log(t),o.close(),t.data.success?(n.$message.success("登录成功!"),n.$router.push({path:"/main"}),n.form.mark?(localStorage.setItem("name",n.form.name),localStorage.setItem("pass",n.form.pass)):(localStorage.removeItem("name"),localStorage.removeItem("pass"))):n.$message.error("登录失败!")}).catch(function(t){console.log(t),o.close(),n.$message.error("登录失败!")})})}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-bg"},[a("div",{staticClass:"login-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.form,"status-icon":"",rules:t.rules,"label-width":"80px",size:"large"}},[a("el-form-item",{attrs:{label:"账号",prop:"name"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.form.pass,callback:function(e){t.$set(t.form,"pass",e)},expression:"form.pass"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"记住密码",prop:"mark"}},[a("el-switch",{model:{value:t.form.mark,callback:function(e){t.$set(t.form,"mark",e)},expression:"form.mark"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit("ruleForm")}}},[t._v("登录")]),t._v(" "),a("el-button",[t._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var x=a("VU/8")(S,k,!1,function(t){a("DRAD"),a("cfp2")},"data-v-c12ead16",null).exports;o.default.use(i.a);var O=new i.a({routes:[{path:"/",name:"Login",component:x},{path:"/main",name:"Main",component:F}]}),$=a("mtWM"),w=a.n($),D=a("zL8q"),N=a.n(D);a("bewX");o.default.use(N.a,{size:"medium"}),o.default.prototype.$http=w.a,"undefined"!=window.client&&void 0!=window.client?o.default.prototype.BaseUrl=client.addr():o.default.prototype.BaseUrl="http://app.tuxingtianxia.com.cn/client/",o.default.config.productionTip=!1,new o.default({el:"#app",router:O,render:function(t){return t(r)},template:"<App/>"})},SmGP:function(t,e){},WC2d:function(t,e){},bewX:function(t,e){},cfp2:function(t,e){},sQCG:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a978653da6dd9e43bed7.js.map