webpackJsonp([1],{"0BXp":function(t,e){},"3U8a":function(t,e){throw new Error("Module build failed: SyntaxError: E:/AppCanStudioEnterpriseV4.0/widgetapp/order/src/components/order/OrderPay.vue: package is a reserved word in strict mode (200:10)\n\n[0m [90m 198 | [39m      let timestamp [33m=[39m obj[33m.[39mtimeStamp[33m;[39m\n [90m 199 | [39m      let nocncestr [33m=[39m obj[33m.[39mnonceStr[33m;[39m\n[31m[1m>[22m[39m[90m 200 | [39m      let package [33m=[39m obj[33m.[39mpackageValue[33m;[39m\n [90m     | [39m          [31m[1m^[22m[39m\n [90m 201 | [39m      let paysign [33m=[39m obj[33m.[39mpaySign[33m;[39m\n [90m 202 | [39m      [33mWeixinJSBridge[39m[33m.[39minvoke(\n [90m 203 | [39m        [32m'getBrandWCPayRequest'[39m[33m,[39m {[0m\n")},"5r2i":function(t,e){t.exports="data:image/png;base64,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"},"7xjS":function(t,e){},"8kYu":function(t,e){},"991W":function(t,e){},ENeJ:function(t,e){},MShq:function(t,e){},NHnr:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("transition",{attrs:{name:this.transitionName}},[e("keep-alive",[this.$route.meta.keepAlive?e("router-view",{staticClass:"child-view"}):this._e()],1)],1),this._v(" "),e("transition",{attrs:{name:this.transitionName}},[this.$route.meta.keepAlive?this._e():e("router-view",{staticClass:"child-view"})],1)],1)},staticRenderFns:[]};var r=i("VU/8")({name:"App",data:function(){return{transitionName:"slide-left"}},watch:{$route:function(t,e){var s=this.$router.isBack;this.transitionName=s?"slide-right":"slide-left",this.$router.isBack=!1}}},o,!1,function(t){i("xV6e")},null,null).exports,n=i("/ocq"),c=i("pFYg"),l=i.n(c),d=i("mvHQ"),u=i.n(d),m={props:{food:{type:Object},judge:{type:Boolean,default:!1}},data:function(){return{field:"quantity"}},created:function(){this.fields&&(this.field=this.fields)},methods:{beforeAddFood:function(t){this.food[this.field]||this.$set(this.food,this.field,0),this.food.specificationsList.length>1&&this.judge?this.$emit("getFoodQuan",{obj:this.food,isMulti:!0,evt:e}):this.addFood(t)},beforeDecFood:function(t){this.food.specificationsList.length>1&&this.judge?this.$dialog.notify({mes:"多规格商品只能去购物车删除噢！",timeout:5e3}):this.decreaseFood(t)},addFood:function(t){this.food[this.field]++,this.judge&&this.$emit("getFoodQuan",{obj:this.food,isMulti:!1,evt:t})},decreaseFood:function(t){this.food[this.field]&&this.food[this.field]--,0===this.food[this.field]&&this.$emit("zeroFoodQuan",{obj:this.food,evt:t})}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cartcontrol"},[s("transition",{attrs:{name:"move"}},[t.food[t.field]>0?s("div",{staticClass:"cart-decrease",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.beforeDecFood(e)}}},[s("span",{staticClass:"inner"},[t._v("-")])]):t._e()]),t._v(" "),t.food[t.field]>0?s("div",{staticClass:"cart-count"},[t._v(t._s(this.food[t.field]))]):t._e(),t._v(" "),s("div",{staticClass:"cart-add",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.beforeAddFood(e)}}},[s("span",{staticClass:"inner"},[t._v("+")])])],1)},staticRenderFns:[]};var h=i("VU/8")(m,p,!1,function(t){i("cDer")},"data-v-c18543c6",null).exports,f={props:{food:{type:Object},flag:{type:Boolean,default:!1}},data:function(){return{remarkArr:[{text:"不吃葱"},{text:"不吃蒜"},{text:"不吃香菜"},{text:"不放辣"},{text:"少放辣"},{text:"多放辣"}],remarkActiveArr:[],remark:"",index:0}},watch:{flag:function(t){var e=this;t||setTimeout(function(){e.index=0,e.remarkActiveArr.splice(0,e.remarkActiveArr.length),e.remark=""},201)}},computed:{isMultiFormat:function(){return this.food.specificationsList&&this.food.specificationsList.length>1}},methods:{pickFormat:function(t,e){this.index=e},pickRemark:function(t,e){for(var s=!1,i=0;i<this.remarkActiveArr.length;i++)if(this.remarkActiveArr[i]===t.text){this.remarkActiveArr.splice(i,1),s=!0;break}s||this.remarkActiveArr.push(t.text)},clsFormatPopup:function(){this.$emit("clsFormatPopup")},confirmFormat:function(){var t=this.food.specificationsList[this.index],e={id:t.id,pageName:t.pageName,unitPrice:t.unitPrice,remarkArr:JSON.parse(u()(this.remarkActiveArr)),remark:this.remark.trim()};this.$emit("clsFormatPopup",e)}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.food?s("div",{staticClass:"my-list-frm"},[s("div",{staticClass:"my-format-con"},[s("div",{staticClass:"my-format-dishes"},[t._v(t._s(t.food.dishesName))]),t._v(" "),t.isMultiFormat?s("div",{staticClass:"my-format"},[s("div",{staticClass:"my-format-title"},[t._v("规格")]),t._v(" "),s("div",{staticClass:"my-format-box"},t._l(t.food.specificationsList,function(e,i){return s("div",{staticClass:"my-format-item",class:{active:t.index===i},on:{click:function(s){t.pickFormat(e,i)}}},[t._v(t._s(e.pageName))])}))]):t._e(),t._v(" "),s("div",{staticClass:"my-format"},[s("div",{staticClass:"my-format-title"},[t._v("备注")]),t._v(" "),s("div",{staticClass:"my-format-box"},t._l(t.remarkArr,function(e,i){return s("div",{staticClass:"my-format-item",class:{active:t.remarkActiveArr.indexOf(e.text)>-1},on:{click:function(s){t.pickRemark(e,i)}}},[t._v(t._s(e.text))])})),t._v(" "),s("label",{staticClass:"my-format-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{type:"text",name:"",placeholder:"请输入其他备注"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"my-format-btm"},[s("yd-flexbox",[s("yd-flexbox-item",[s("yd-flexbox",[s("div",{staticClass:"my-price my-format-price fc-theme"},[s("em",[t._v("¥")]),t._v(t._s(t.food.specificationsList[t.index].unitPrice))]),t._v(" "),t.isMultiFormat||t.remarkActiveArr.length||t.remark?s("div",{staticClass:"my-format-remark"},[s("span",[t._v("(")]),t._v(" "),t.isMultiFormat?s("span",[t._v(t._s(t.food.specificationsList[t.index].pageName))]):t._e(),t._v(" "),s("span",[t._v(t._s(t.remark))]),t._v(" "),t._l(t.remarkActiveArr,function(e,i){return s("span",[t._v(" "+t._s(e))])}),t._v(" "),s("span",[t._v(")")])],2):t._e()])],1),t._v(" "),s("div",{staticClass:"my-format-confirm bg-theme",on:{click:t.confirmFormat}},[t._v("确定")])],1)],1),t._v(" "),s("div",{staticClass:"my-list-frm-cls",on:{click:t.clsFormatPopup}},[t._v("×")])]):t._e()},staticRenderFns:[]};var y=i("VU/8")(f,v,!1,function(t){i("T3ou")},"data-v-4d7f2e0a",null).exports,g={props:{list:{type:Array,default:[]},buyFlag:{type:Boolean}},data:function(){return{flag:!1}},components:{cartCtrl:h},watch:{buyFlag:function(t){this.flag=t},flag:function(t){t||this.$emit("getShowBuyFlag",1)}},methods:{delBuyList:function(t,e){this.list.splice(e,1)},clrBuyList:function(){var t=this;this.$dialog.confirm({mes:"清空购物车？",opts:function(){for(var e=t.list,s=0;s<e.length;s++)e[s].quantity=0;t.list.splice(0,e.length)}})}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("yd-popup",{staticClass:"buy-list",model:{value:t.flag,callback:function(e){t.flag=e},expression:"flag"}},[s("div",{staticClass:"buy-list-head",attrs:{slot:"top"},slot:"top"},[s("yd-flexbox",[s("yd-flexbox-item",[s("div",{staticClass:"buy-list-title"},[t._v("已选商品")])]),t._v(" "),s("div",{staticClass:"buy-list-empty",on:{click:t.clrBuyList}},[s("yd-icon",{attrs:{name:"delete",size:".24rem",color:"#bbb"}}),t._v(" "),s("span",{staticClass:"buy-list-empty-text"},[t._v("清空")])],1)],1)],1),t._v(" "),s("div",{staticClass:"buy-list-box",attrs:{slot:"bottom"},slot:"bottom"},t._l(t.list,function(e,i){return t.flag?s("div",{staticClass:"buy-list-item"},[s("yd-flexbox",[s("yd-flexbox-item",[s("div",{staticClass:"buy-list-item-title"},[t._v(t._s(e.dishesName))]),t._v(" "),s("div",{staticClass:"buy-list-item-format"},[e.specificationsList.length>1?[t._v(t._s(e.spec.pageName))]:t._e(),t._v(" "),t._l(e.spec.remarkArr,function(e,s){return[t._v(t._s(e)+" ")]}),t._v(" "),""!==e.spec.remark?[t._v(t._s(e.spec.remark))]:t._e()],2)]),t._v(" "),e.hasOwnProperty("spec")?s("div",{staticClass:"buy-list-price"},[s("span",{staticClass:"my-price fc-theme"},[s("em",[t._v("¥")]),t._v(t._s(e.spec.unitPrice*e.quantity||"--"))])]):s("div",{staticClass:"buy-list-price"},[e.costPrice&&e.salesPrice<e.costPrice?s("span",{staticClass:"my-price-old fc-theme"},[s("em",[t._v("¥")]),t._v(t._s(e.costPrice*e.quantity))]):t._e(),t._v(" "),s("span",{staticClass:"my-price fc-theme"},[s("em",[t._v("¥")]),t._v(t._s(e.salesPrice*e.quantity||"--"))])]),t._v(" "),s("div",[s("cart-ctrl",{attrs:{food:e},on:{zeroFoodQuan:function(e){t.delBuyList(e,i)}}})],1)],1)],1):t._e()}))])},staticRenderFns:[]};var _=i("VU/8")(g,b,!1,function(t){i("MShq")},null,null).exports,k={data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[]}},methods:{drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},beforeDrop:function(t){for(var e=this.balls.length;e--;){var s=this.balls[e];if(s.show){var i=s.el.getBoundingClientRect(),a=i.left-32,o=-(window.innerHeight-i.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,"+o+"px,0)",t.style.transform="translate3d(0,"+o+"px,0)";var r=t.getElementsByClassName("inner-hook")[0];r.style.webkitTransform="translate3d("+a+"px,0,0)",r.style.transform="translate3d("+a+"px,0,0)"}}},dropping:function(t,e){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var s=t.getElementsByClassName("inner-hook")[0];s.style.webkitTransform="translate3d(0,0,0)",s.style.transform="translate3d(0,0,0)",t.addEventListener("transitionend",e)})},afterDrop:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")}}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ball-container"},t._l(t.balls,function(e){return s("div",[s("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeDrop,enter:t.dropping,"after-enter":t.afterDrop}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[s("div",{staticClass:"inner inner-hook"})])])],1)}))},staticRenderFns:[]};var x=i("VU/8")(k,C,!1,function(t){i("7xjS")},"data-v-a6e97fd4",null).exports,A=(new a.default,{render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"opt"},[s("yd-grids-group",{attrs:{rows:2}},t._l(t.optArr,function(e,i){return s("yd-grids-item",{key:i,attrs:{type:"link",link:e.routerObj}},[s("div",{staticClass:"my-opt-con",attrs:{slot:"else"},slot:"else"},[s("button",{staticClass:"my-opt-btn",attrs:{type:"button"},on:{click:t.clsOptModal}},[s("div",{staticClass:"my-opt-btn-text",domProps:{textContent:t._s(e.text)}})])])])}))],1)},staticRenderFns:[]});var F={data:function(){return{order:[],pick:[],menu:[],type:[],showBuyFlag:!1,formatFlag:!1,optionFlag:!1,currentFood:null,multiClickTarget:null}},components:{cartCtrl:h,formatPopup:y,buyList:_,drop:x,optionPopup:i("VU/8")({props:{},data:function(){return{optArr:[{text:"订单资料",routerObj:{name:"OrderDetail"}},{text:"催菜",routerObj:{name:"OrderUrge"}}]}},methods:{clsOptModal:function(){this.$emit("clsOptionPopup","0")}}},A,!1,function(t){i("WQLM")},null,null).exports},computed:{pickObj:function(){for(var t=0,e=0,s=0;s<this.pick.length;s++){var i=this.pick[s];t+=Number(i.quantity),i.hasOwnProperty("spec")?e+=Number(i.spec.unitPrice)*Number(i.quantity):e+=Number(i.salesPrice)*Number(i.quantity)}return t||(this.showBuyFlag=!1),{sumAmount:t,sumPrice:e}}},watch:{pick:{handler:function(t,e){var s=this;this.$nextTick(function(){for(var e=document.querySelectorAll(".yd-scrolltab-item"),i=0;i<s.type.length;i++)s.type[i].q=0;for(var a=0;a<t.length;a++)t:for(var o=0;o<s.type.length;o++)if(t[a].dishesClassification===s.type[o].type){s.type[o].q+=t[a].quantity;break t}for(var r=0;r<e.length;r++)if(e[r].querySelector(".my-scrolltab-badge"))s.type[r].q>0?e[r].querySelector(".my-scrolltab-badge").innerHTML=s.type[r].q:e[r].removeChild(e[r].querySelector(".my-scrolltab-badge"));else if(s.type[r].q>0){var n=document.createElement("div");n.classList.add("my-scrolltab-badge"),n.appendChild(document.createTextNode(s.type[r].q)),e[r].appendChild(n)}})},deep:!0}},created:function(){this.getData(),this.$route.meta.keepAlive=!0},methods:{getData:function(){var t=this,e=this.$route.query.seatId,s=this.$route.query.shopId;alert(e),alert(s);var i=this.$baseURL+"maroClientServerorderController.do?listMenuForApp&seatId="+e+"&user=heshanlong&pass=888888&shopId="+s;alert.log(i);var a="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx230c617d7f6c9677&redirect_uri="+encodeURI(i)+"&response_type=code&scope=snsapi_userinfo&state=state#wechat_redirect",o=encodeURI(a);this.$dialog.loading.open("努力获取菜单中"),this.$store.dispatch("setSeatId",e),this.$store.dispatch("setShopId",s);var r=new URLSearchParams;r.append("shopId",s),r.append("seatId",e),r.append("user","heshanlong"),r.append("pass","88888888"),this.$http.post(o,r).then(function(e){console.log(e),console.log(e.data.obj.serverorderId),e.data.success?(t.$dialog.loading.close(),"null"!=e.data.obj.serverorderId&&t.$store.dispatch("setOrderId",e.data.obj.serverorderId),t.$store.dispatch("setOpenId",e.data.attributes.openId),t.$store.dispatch("setSeatName",e.data.obj.maroShopSeatEntity.name),t.handleMenu(e.data.obj.menuItemGroupResultDTOList),t.handleOrder(e.data.obj.maroClientFoodorderVOList)):t.getMenuError(e)}).catch(function(e){t.getMenuError(e)})},getMenuError:function(t){this.$dialog.loading.close(),this.$dialog.notify({mes:"暂时无法获取菜单，请稍后重新扫码。",timeout:5e3})},handleMenu:function(t){var e=this;this.menu=[].concat(t),console.log(t),this.menu.forEach(function(t,s){var i={type:t.type,typeString:t.typeString,q:0};e.type.push(i),t.menuItemResultDTOList.forEach(function(t,s){e.$set(t.maroDishesEntity,"quantity",0)})})},handleOrder:function(t){this.order=[].concat(t),console.log(t)},zeroFoodQuan:function(t,e){this.pick.splice(e,1)},handleFoodQuan:function(t){if(this.formatFlag=t.isMulti,t.isMulti)this.currentFood=t.obj,this.multiClickTarget=t.evt;else{this.$refs.ball.drop(t.evt.target);for(var e=!1,s=0;s<this.pick.length;s++)if(this.pick[s].id===t.obj.id){e=!0;break}e||this.pick.push(t.obj)}},openFormatPopup:function(t){var e={obj:t,isMulti:!0,evt:event};this.handleFoodQuan(e)},clsFormatPopup:function(t){if(this.formatFlag=!1,t){this.$refs.ball.drop(this.multiClickTarget.target);for(var e=!1,s=0;s<this.pick.length;s++){var i=this.pick[s];if(i.id===this.currentFood.id&&i.hasOwnProperty("spec")&&i.spec.id===t.id&&i.spec.remarkIpt===t.remarkIpt&&i.spec.remarkArr.sort().toString()===t.remarkArr.sort().toString()){i.quantity++,e=!0;break}}e||(this.pick.push(JSON.parse(u()(this.currentFood))),this.$set(this.pick[this.pick.length-1],"spec",t),this.$set(this.pick[this.pick.length-1],"quantity",1)),this.currentFood=null,this.multiClickTarget=null}},getShowBuyFlag:function(t){this.showBuyFlag=!1},triggerBuyList:function(){0!==this.pick.length?this.showBuyFlag=!this.showBuyFlag:this.showBuyFlag=!1},switchOptionPopup:function(t){this.optionFlag="object"===(void 0===t?"undefined":l()(t))},pickDone:function(){this.getShowBuyFlag(),0!==this.pick.length&&(this.$store.dispatch("setPick",this.pick),this.$store.dispatch("setSum",this.pickObj.sumPrice),this.$store.dispatch("setAmount",this.pickObj.sumAmount),this.$router.push({name:"OrderConfirm"}))}}},O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("yd-layout",{staticClass:"content"},[s("yd-navbar",{staticClass:"bg-theme",attrs:{slot:"navbar",title:"点餐"},slot:"navbar"},[t.menu.length?s("div",{attrs:{slot:"right"},on:{click:t.switchOptionPopup},slot:"right"},[s("yd-icon",{attrs:{name:"more"}})],1):t._e()]),t._v(" "),s("div",{staticClass:"scrolltab"},[t.menu.length>0?s("yd-scrolltab",t._l(t.menu,function(e,i){return s("yd-scrolltab-panel",{key:i,attrs:{label:e.typeString,icon:""}},[s("yd-list",{staticClass:"my-list-meal",attrs:{theme:"4"}},t._l(e.menuItemResultDTOList,function(e,i){return s("yd-list-item",{key:i},[s("div",{staticClass:"my-list-title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.maroDishesEntity.dishesName))]),t._v(" "),s("div",{staticClass:"my-list-title-note",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.maroDishesEntity.describes))]),t._v(" "),s("yd-list-other",{attrs:{slot:"other"},slot:"other"},[s("div",[s("span",{staticClass:"my-price fc-theme"},[s("em",[t._v("¥")]),t._v(t._s(e.maroDishesEntity.salesPrice||"--"))]),t._v(" "),e.maroDishesEntity.costPrice&&e.maroDishesEntity.salesPrice<e.maroDishesEntity.costPrice?[s("span",{staticClass:"my-price-old fc-theme"},[s("em",[t._v("¥")]),t._v(t._s(e.maroDishesEntity.costPrice))])]:t._e()],2),t._v(" "),s("div",[e.maroDishesEntity.specificationsList.length>1?[s("button",{staticClass:"my-list-format-btn",attrs:{type:"button"},on:{click:function(s){t.openFormatPopup(e.maroDishesEntity)}}},[t._v("选规格")])]:[s("button",{staticClass:"my-list-format-btn",attrs:{type:"button"},on:{click:function(s){t.openFormatPopup(e.maroDishesEntity)}}},[t._v("+ 加入购物车")])]],2)])],1)}))],1)})):t._e()],1),t._v(" "),s("div",{staticClass:"my-buy",attrs:{slot:"bottom"},slot:"bottom"},[s("yd-flexbox",{staticClass:"my-buy-box"},[s("yd-flexbox-item",[s("div",{staticClass:"my-buy-left yd-flexbox"},[s("div",{staticClass:"my-buy-btn bg-theme",on:{click:t.triggerBuyList}},[s("yd-icon",{attrs:{name:"shopcart-outline",size:".6rem",color:"#FFF"}}),t._v(" "),s("div",{staticClass:"my-buy-btn-amount",class:{active:t.pickObj.sumAmount}},[t._v(t._s(t.pickObj.sumAmount))]),t._v(" "),s("drop",{ref:"ball"})],1),t._v(" "),s("div",{staticClass:"my-price fc-theme"},[s("em",[t._v("¥")]),t._v(t._s(t.pickObj.sumPrice))])])]),t._v(" "),s("div",{staticClass:"my-buy-right"},[s("button",{staticClass:"my-buy-pay",class:t.pick.length>0?"bg-theme":"bg-disabled",attrs:{type:"button"},on:{click:t.pickDone}},[s("span",{staticClass:"my-buy-pay-text",domProps:{textContent:t._s(t.pick.length>0?"选好了":"请选择")}})])])],1)],1),t._v(" "),s("buy-list",{attrs:{list:t.pick,buyFlag:t.showBuyFlag},on:{getShowBuyFlag:function(e){t.getShowBuyFlag(e)}}})],1),t._v(" "),s("yd-popup",{attrs:{width:"80%",position:"center"},model:{value:t.formatFlag,callback:function(e){t.formatFlag=e},expression:"formatFlag"}},[s("format-popup",{attrs:{food:t.currentFood,flag:t.formatFlag},on:{clsFormatPopup:function(e){t.clsFormatPopup(e)}}})],1),t._v(" "),s("yd-popup",{staticClass:"opts",attrs:{width:"100%",position:"center"},model:{value:t.optionFlag,callback:function(e){t.optionFlag=e},expression:"optionFlag"}},[s("option-popup",{on:{clsOptionPopup:function(e){t.switchOptionPopup(e)}}})],1)],1)},staticRenderFns:[]};var w=i("VU/8")(F,O,!1,function(t){i("8kYu")},null,null).exports,E=i("Dd8w"),S=i.n(E),P=i("NYxO"),I={data:function(){return{orderList:[],disNo:"",beginTime:""}},computed:S()({},Object(P.b)(["getOrderId","getPick"])),components:{},created:function(){var t=this;this.$dialog.loading.open("努力获取订单信息中");var e=new URLSearchParams;e.append("serverOrderId",this.getOrderId),console.log(this.getOrderId),this.$http.post(this.$baseURL+"maroClientServerorderController.do?getServerOrderById",e).then(function(e){console.log(e),e.data.success?(t.$dialog.loading.close(),t.handleOrderData(e.data.obj)):t.getOrderError(e)}).catch(function(e){console.log(res),t.getOrderError(e)})},methods:{getOrderError:function(t){this.$dialog.loading.close(),this.$router.goBack(),this.$dialog.notify({mes:"暂时无法获取订单详情，请稍后重试。",timeout:5e3})},handleOrderData:function(t){this.disNo=t.maroClientServerorderVO.code,this.beginTime=this.stampToTime(t.maroClientServerorderVO.beginTime),this.orderList=[].concat(t.maroClientFoodOrderVOs);for(var e=0;e<this.orderList.length;e++)this.$set(this.orderList[e],"statusText",this.arrStatus[this.orderList[e].status])},stampToTime:function(t){var e=this,s=new Date(10==t.length?1e3*t:t);return s.getFullYear()+"-"+e.supplyZero(s.getMonth()+1)+"-"+e.supplyZero(s.getDate())+" "+e.supplyZero(s.getHours())+":"+e.supplyZero(s.getMinutes())+":"+e.supplyZero(s.getSeconds())},supplyZero:function(t){return Number(t)<10?"0"+t:t},backTo:function(){this.$router.goBack(),0==this.getPick.length&&this.$router.beforeEach(function(t,e,s){console.log(t),"OrderBase"===t.name&&(t.meta.keepAlive=!1),s()})}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("yd-layout",{staticClass:"content"},[s("yd-navbar",{staticClass:"bg-theme",attrs:{slot:"navbar",title:"订单详情"},slot:"navbar"},[s("div",{attrs:{slot:"left"},on:{click:t.backTo},slot:"left"},[s("yd-navbar-back-icon")],1)]),t._v(" "),s("div",{staticClass:"my-container"},[s("div",{staticClass:"my-box ord-box"},[s("div",{staticClass:"ord-item ord-cell"},[s("yd-flexbox",[s("div",{staticClass:"ord-cell-label"},[t._v("下单时间")]),t._v(" "),s("yd-flexbox-item",[s("div",{staticClass:"ord-cell-value"},[t._v(t._s(t.beginTime))])])],1)],1),t._v(" "),s("div",{staticClass:"ord-item ord-cell"},[s("yd-flexbox",[s("div",{staticClass:"ord-cell-label"},[t._v("下单流水号")]),t._v(" "),s("yd-flexbox-item",[s("div",{staticClass:"ord-cell-value"},[t._v(t._s(t.disNo))])])],1)],1)]),t._v(" "),s("div",{staticClass:"my-box ord-box"},t._l(t.orderList,function(e,i){return s("div",{staticClass:"ord-item ord-list"},[s("yd-flexbox",[s("yd-flexbox-item",[s("div",{staticClass:"ord-list-name"},[t._v(t._s(e.foodName))]),t._v(" "),s("div",{staticClass:"ord-list-format fc-theme"},[t._v(t._s(e.specificationsName))])]),t._v(" "),s("div",{staticClass:"ord-list-amount"},[t._v("×"+t._s(e.quantity))]),t._v(" "),s("div",{staticClass:"ord-list-price"},[s("span",{staticClass:"my-price fc-theme"},[s("em",[t._v("¥")]),t._v(t._s(e.price))])]),t._v(" "),s("div",{staticClass:"ord-list-status"},[t._v(t._s(e.statusText))])],1)],1)}))])],1)],1)},staticRenderFns:[]};var $=i("VU/8")(I,L,!1,function(t){i("uAE1")},"data-v-0b6d72f1",null).exports,B={data:function(){return{serverOrderId:"54598430-3eb7-43f8-9c89-507664c92edb",urgeList:[],checkList:[],submitList:[]}},computed:S()({},Object(P.b)(["getOrderId"])),created:function(){var t=this;this.$dialog.loading.open("努力获取菜品信息中");var e=new URLSearchParams;e.append("serverOrderId",this.getOrderId),this.$http.post(this.$baseURL+"maroClientServerorderController.do?getServerOrderById",e).then(function(e){e.data.success?(t.$dialog.loading.close(),t.handleDishData(e.data.obj)):t.getDishError(e)}).catch(function(e){t.getDishError(e)})},methods:{getDishError:function(t){this.$dialog.loading.close(),this.$router.goBack(),this.$dialog.notify({mes:"暂时无法获取菜品信息，请稍后重试。",timeout:5e3})},handleDishData:function(t){this.urgeList=t.maroClientFoodOrderVOs.filter(function(t){return 6!==t.states})},urgeSubmitHandle:function(){if(this.submitList.splice(0,this.submitList.length),0!==this.checkList.length){for(var t=0;t<this.checkList.length;t++){var e=this.urgeList[this.checkList[t]],s={id:e.id,foodName:e.foodName,quantity:e.quantity};this.submitList.push(s)}this.urgeSubmit()}else this.$dialog.notify({mes:"请先选择需要催的菜品。",timeout:3e3})},urgeSubmit:function(){var t=this;this.$dialog.loading.open("正在为你催菜中");var e={maroClientFoodorderDOList:this.submitList,maroClientServerorderDO:{id:this.serverOrderId}},s=new URLSearchParams;s.append("foodOrderParamsDTOJson",u()(e)),this.$http.post(this.$baseURL+"maroClientServerorderController.do?UrgeFood",s).then(function(e){e.data.success?(t.$dialog.loading.close(),t.urgeSubmitSuccess()):t.urgeSubmitError(e)}).catch(function(e){t.urgeSubmitError(e)})},urgeSubmitError:function(t){this.$dialog.loading.close(),this.$dialog.notify({mes:"暂时未能为您催菜，请稍后重试。",timeout:5e3})},urgeSubmitSuccess:function(){this.$router.goBack(),this.$dialog.toast({mes:"已为您催菜，菜品将尽快上桌",timeout:2e3,icon:"success"})}}},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("yd-layout",{staticClass:"content"},[s("yd-navbar",{staticClass:"bg-theme",attrs:{slot:"navbar",title:"催菜"},slot:"navbar"},[s("div",{attrs:{slot:"left"},on:{click:function(e){t.$router.goBack()}},slot:"left"},[s("yd-navbar-back-icon")],1)]),t._v(" "),s("div",{staticClass:"my-container"},[s("div",{staticClass:"my-box urge"},[s("yd-checklist",{attrs:{color:"#ED3368"},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.urgeList,function(e,i){return s("yd-checklist-item",{key:i,attrs:{val:i}},[s("yd-flexbox",{staticClass:"urge-pick"},[s("yd-flexbox-item",[s("div",{staticClass:"urge-pick-name"},[t._v(t._s(e.foodName))]),t._v(" "),s("div",{staticClass:"urge-pick-format fc-theme"},[t._v(t._s(e.specificationsName))])]),t._v(" "),s("div",[s("span",{staticClass:"my-price fc-theme"},[s("em",[t._v("¥")]),t._v(t._s(e.price))])])],1)],1)}))],1)]),t._v(" "),s("div",{staticClass:"my-btn-box",attrs:{slot:"bottom"},slot:"bottom"},[s("yd-button",{staticClass:"my-btn my-btn-shade bg-theme",attrs:{size:"large",type:"primary",shape:"circle"},nativeOn:{click:function(e){return t.urgeSubmitHandle(e)}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var j=i("VU/8")(B,N,!1,function(t){i("0BXp")},"data-v-35584245",null).exports,D={data:function(){return{confirmList:[],sum:0}},computed:S()({},Object(P.b)(["getPick","getSum"])),created:function(){this.confirmList=this.getPick,this.sum=this.getSum},methods:{goPay:function(){this.$router.replace({name:"OrderPay"})}}},q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("yd-layout",{staticClass:"content"},[s("yd-navbar",{staticClass:"bg-theme",attrs:{slot:"navbar",title:"确认订单"},slot:"navbar"},[s("div",{attrs:{slot:"left"},on:{click:function(e){t.$router.goBack()}},slot:"left"},[s("yd-navbar-back-icon")],1)]),t._v(" "),s("div",{staticClass:"my-container"},[s("div",{staticClass:"my-box ord-box"},t._l(t.confirmList,function(e,i){return s("div",{staticClass:"ord-item ord-list"},[s("yd-flexbox",[s("yd-flexbox-item",[s("div",{staticClass:"ord-list-name"},[t._v(t._s(e.dishesName))]),t._v(" "),s("div",{staticClass:"ord-list-format fc-theme"},[e.specificationsList.length>1?[t._v(t._s(e.spec.pageName))]:t._e(),t._v(" "),t._l(e.spec.remarkArr,function(e,s){return[t._v(t._s(e)+" ")]}),t._v(" "),""!==e.spec.remark?[t._v(t._s(e.spec.remark))]:t._e()],2)]),t._v(" "),s("div",{staticClass:"ord-list-amount"},[t._v("×"+t._s(e.quantity))]),t._v(" "),s("div",{staticClass:"ord-list-price"},[s("span",{staticClass:"my-price fc-theme"},[s("em",[t._v("¥")]),t._v(t._s(e.spec.unitPrice*e.quantity))])])],1)],1)}))]),t._v(" "),s("div",{staticClass:"my-buy",attrs:{slot:"bottom"},slot:"bottom"},[s("yd-flexbox",{staticClass:"my-buy-box"},[s("yd-flexbox-item",[s("div",{staticClass:"my-buy-left yd-flexbox"},[s("div",{staticClass:"my-price fc-theme"},[s("em",[t._v("¥")]),t._v(t._s(t.sum))])])]),t._v(" "),s("div",{staticClass:"my-buy-right"},[s("button",{staticClass:"my-buy-pay bg-theme",attrs:{type:"button"},on:{click:t.goPay}},[s("span",{staticClass:"my-buy-pay-text"},[t._v("结账")])])])],1)],1)],1)],1)},staticRenderFns:[]};var U=i("VU/8")(D,q,!1,function(t){i("wEK6")},"data-v-385aa211",null).exports,T=i("zLFX"),M={data:function(){return{icon:i("5r2i"),pickList:[],sum:0,amount:0,seatName:""}},computed:S()({},Object(P.b)(["getPick","getSum","getAmount","getSeatName"])),created:function(){this.pickList=this.getPick,this.sum=this.getSum,this.amount=this.getAmount,this.seatName=this.getSeatName},methods:{back:function(){this.$router.goBack(),this.$store.dispatch("setPick",[]),this.$store.dispatch("setSum",0),this.$store.dispatch("setAmount",0),this.$router.beforeEach(function(t,e,s){"OrderBase"===t.name&&"OrderSuccess"===e.name&&(t.meta.keepAlive=!1),s()})}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("yd-layout",{staticClass:"content"},[s("yd-navbar",{staticClass:"bg-theme",attrs:{slot:"navbar",title:"支付成功"},slot:"navbar"},[s("div",{attrs:{slot:"left"},on:{click:t.back},slot:"left"},[s("yd-navbar-back-icon")],1)]),t._v(" "),s("div",[s("div",{staticClass:"my-box suc-box"},[s("yd-flexbox",{staticClass:"suc-title"},[s("div",{staticClass:"suc-icon"},[s("img",{attrs:{src:t.icon}})]),t._v(" "),s("div",{staticClass:"suc-icon-text"},[t._v("您点的菜已下单")])]),t._v(" "),s("div",{staticClass:"suc-info"},[s("div",{staticClass:"suc-text-table"},[t._v("第"+t._s(t.seatName))]),t._v(" "),s("yd-flexbox",[s("yd-flexbox-item",[s("div",{staticClass:"suc-text-black"},[t._v("您已点了"+t._s(t.amount)+"道菜，共支付"+t._s(t.sum)+"元")])]),t._v(" "),s("div",{staticClass:"suc-text-grey",staticStyle:{display:"none"}},[t._v("点餐详情＞")])],1)],1),t._v(" "),s("div",{staticClass:"suc-btn-box"},[s("yd-button",{staticClass:"my-btn bg-theme",attrs:{size:"large"},nativeOn:{click:function(e){return t.back(e)}}},[t._v("加菜")])],1)],1)])],1)],1)},staticRenderFns:[]};var Q=i("VU/8")(M,R,!1,function(t){i("yiZ8")},null,null).exports;a.default.use(n.a),n.a.prototype.isBack=!1,n.a.prototype.goBack=function(){this.isBack=!0,window.history.go(-1)};var J=new n.a({routes:[{path:"/",name:"OrderBase",component:w,meta:{title:"点餐",keepAlive:!0}},{path:"/detail",name:"OrderDetail",component:$,meta:{title:"订单详情",keepAlive:!1}},{path:"/urge",name:"OrderUrge",component:j,meta:{title:"催菜",keepAlive:!1}},{path:"/confirm",name:"OrderConfirm",component:U,meta:{title:"确认订单",keepAlive:!1}},{path:"/pay",name:"OrderPay",component:T.default,meta:{title:"支付",keepAlive:!1}},{path:"/ordersuccess",name:"OrderSuccess",component:Q,meta:{title:"支付成功",keepAlive:!1}}],mode:"history"}),z=i("mtWM"),Y=i.n(z),H=i("r8FW"),G=i.n(H),V=(i("ENeJ"),i("991W"),{state:{pick:[],sum:0,amount:0,orderId:"",seatId:"",seatName:"",openId:"",shopId:""},mutations:{setPick:function(t,e){t.pick=e},setSum:function(t,e){t.sum=e},setAmount:function(t,e){t.amount=e},setOrderId:function(t,e){t.orderId=e},setSeatId:function(t,e){t.seatId=e},setSeatName:function(t,e){t.seatName=e},setOpenId:function(t,e){t.openId=e},setShopId:function(t,e){t.shopId=e}},actions:{setPick:function(t,e){var s=t.commit;t.state,s("setPick",e)},setSum:function(t,e){var s=t.commit;t.state,s("setSum",e)},setAmount:function(t,e){var s=t.commit;t.state,s("setAmount",e)},setOrderId:function(t,e){var s=t.commit;t.state,s("setOrderId",e)},setSeatId:function(t,e){var s=t.commit;t.state,s("setSeatId",e)},setSeatName:function(t,e){var s=t.commit;t.state,s("setSeatName",e)},setOpenId:function(t,e){var s=t.commit;t.state,s("setOpenId",e)},setShopId:function(t,e){var s=t.commit;t.state,s("setShopId",e)}},getters:{getPick:function(t,e){return t.pick},getSum:function(t,e){return t.sum},getAmount:function(t,e){return t.amount},getOrderId:function(t,e){return t.orderId},getSeatId:function(t,e){return t.seatId},getSeatName:function(t,e){return t.seatName},getOpenId:function(t,e){return t.openId},getShopId:function(t,e){return t.shopId}}});a.default.use(P.a);var X=new P.a.Store({modules:{cart:V}}),Z=(i("Yzql"),i("mw3O")),K=i.n(Z);a.default.config.productionTip=!1,a.default.use(G.a),a.default.prototype.$http=Y.a,a.default.prototype.$qs=K.a,a.default.prototype.arrStatus=["即起","打厨","出锅","加急","催菜","","已上"],a.default.prototype.$baseURL="http://app.tuxingtianxia.com.cn/",Y.a.defaults.withCredentials=!0,new a.default({el:"#app",router:J,store:X,components:{App:r},template:"<App/>"})},T3ou:function(t,e){},WQLM:function(t,e){},cDer:function(t,e){},l52G:function(t,e){},uAE1:function(t,e){},wEK6:function(t,e){},xV6e:function(t,e){},"xl+2":function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("yd-layout",{staticClass:"content"},[s("yd-navbar",{staticClass:"bg-theme",attrs:{slot:"navbar",title:"支付"},slot:"navbar"},[s("div",{attrs:{slot:"left"},on:{click:function(e){t.$router.goBack()}},slot:"left"},[s("yd-navbar-back-icon")],1)]),t._v(" "),s("div",{staticClass:"my-container"},[s("div",{staticClass:"my-box pay-cell"},[s("yd-cell-group",[s("yd-cell-item",{attrs:{arrow:"",type:"label"}},[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("会员")])]),t._v(" "),s("yd-cell-item",{attrs:{arrow:"",type:"label"}},[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("优惠")])])],1)],1),t._v(" "),s("div",{staticClass:"pay-methods"},[s("div",{staticClass:"pay-methods-title"},[t._v("选择支付方式")]),t._v(" "),s("div",{staticClass:"pay-methods-box"},t._l(t.payMethods,function(e,i){return s("div",{key:i,staticClass:"pay-methods-item"},[s("div",{staticClass:"pay-methods-item-con",class:{active:t.payPickId===e.id},on:{click:function(s){t.pickPay(e,i)}}},[s("div",{staticClass:"pay-methods-icon",style:{backgroundImage:"url("+e.icon+")"}}),t._v(" "),s("div",{staticClass:"pay-methods-name",domProps:{textContent:t._s(e.name)}})])])}))])]),t._v(" "),s("div",{staticClass:"my-btn-box",attrs:{slot:"bottom"},slot:"bottom"},[s("yd-button",{staticClass:"my-btn my-btn-shade bg-theme",attrs:{size:"large",type:"primary",shape:"circle"},nativeOn:{click:function(e){return t.paySubmit(e)}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};e.a=i},yiZ8:function(t,e){},zLFX:function(t,e,s){"use strict";var i=s("3U8a"),a=(s.n(i),s("xl+2"));var o=function(t){s("l52G")},r=s("VU/8")(i.default,a.a,!1,o,null,null);e.default=r.exports}},["NHnr"]);
//# sourceMappingURL=app.26afa2aa7ac595935877.js.map